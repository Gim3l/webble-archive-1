# Migration `20200927193306`

This migration has been generated by Gimel Dick at 9/27/2020, 3:33:06 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Classroom" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL
)

CREATE TABLE "TeacherProfile" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "userId" INTEGER NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL,

    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "TeacherProfileOnClassroom" (
    "teacherProfileId" INTEGER NOT NULL,
    "classroomId" INTEGER NOT NULL,

    FOREIGN KEY ("teacherProfileId") REFERENCES "TeacherProfile"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("classroomId") REFERENCES "Classroom"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("teacherProfileId","classroomId")
)

CREATE UNIQUE INDEX "TeacherProfile_userId_unique" ON "TeacherProfile"("userId")

PRAGMA foreign_keys=off;
DROP TABLE "TutorProfile";
PRAGMA foreign_keys=on

PRAGMA foreign_keys=off;
DROP TABLE "TutorProfileOnSubject";
PRAGMA foreign_keys=on

PRAGMA foreign_keys=off;
DROP TABLE "Subject";
PRAGMA foreign_keys=on
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200926192511..20200927193306
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -21,9 +21,9 @@
   email          String        @unique
   hashedPassword String?
   role           String        @default("user")
   sessions       Session[]
-  TutorProfile   TutorProfile?
+  TeacherProfile   TeacherProfile?
 }
 model Session {
   id                 Int       @default(autoincrement()) @id
@@ -52,29 +52,29 @@
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
-model Subject {
-  id                    Int                     @default(autoincrement()) @id
+model Classroom {
+  id                    Int                         @default(autoincrement()) @id
   name                  String
-  createdAt             DateTime                @default(now())
-  updatedAt             DateTime                @updatedAt
-  TutorProfileOnSubject TutorProfileOnSubject[]
+  createdAt             DateTime                    @default(now())
+  updatedAt             DateTime                    @updatedAt
+  TutorProfileOnSubject TeacherProfileOnClassroom[]
 }
-model TutorProfile {
-  id                    Int                     @default(autoincrement()) @id
-  user                  User                    @relation(fields: [userId], references: [id])
-  userId                Int
-  createdAt             DateTime                @default(now())
-  updatedAt             DateTime                @updatedAt
-  TutorProfileOnSubject TutorProfileOnSubject[]
+model TeacherProfile {
+  id                      Int                         @default(autoincrement()) @id
+  user                    User                        @relation(fields: [userId], references: [id])
+  userId                  Int
+  createdAt               DateTime                    @default(now())
+  updatedAt               DateTime                    @updatedAt
+  TeacherProfileOnSubject TeacherProfileOnClassroom[]
 }
-model TutorProfileOnSubject {
-  tutorProfile   TutorProfile @relation(fields: [tutorProfileId], references: [id])
-  tutorProfileId Int
-  subject        Subject      @relation(fields: [subjectId], references: [id])
-  subjectId      Int
+model TeacherProfileOnClassroom {
+  teacherProfile   TeacherProfile @relation(fields: [teacherProfileId], references: [id])
+  teacherProfileId Int
+  classroom        Classroom      @relation(fields: [classroomId], references: [id])
+  classroomId      Int
-  @@id([tutorProfileId, subjectId])
+  @@id([teacherProfileId, classroomId])
 }
```


